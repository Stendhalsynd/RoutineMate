# S3-5 Spec - IA 분리 + Meal Checkin 전환 + day/week/month 집계

## 범위
- 단일 페이지 구조를 `대시보드 / 기록 / 설정` 3페이지로 분리한다.
- 식단 입력은 자유 텍스트 중심이 아닌 슬롯 체크인(`아침/점심/저녁/저녁2`)으로 전환한다.
- 대시보드 집계는 `range` 유지(`7d/30d/90d`) + `granularity(day/week/month)` 버킷으로 표기한다.
- 식단/운동/체성분 기록은 soft delete(`IsDeleted`, `DeletedAt`)로 삭제한다.
- 식단/운동 템플릿 CRUD를 설정 페이지에서 관리하고 기록 페이지에서 빠르게 사용한다.

## Given / When / Then
1. Given 사용자가 `/`로 진입하면, When 앱이 렌더링되면, Then `/dashboard`로 리다이렉트된다.
2. Given 사용자가 `/dashboard`에 있으면, When range=`7d`이면, Then 일(day) 버킷 7개가 표시된다.
3. Given 사용자가 `/dashboard`에 있으면, When range=`30d`이면, Then ISO week 버킷 평균이 표시된다.
4. Given 사용자가 `/dashboard`에 있으면, When range=`90d`이면, Then month(YYYY-MM) 버킷 평균이 표시된다.
5. Given 사용자가 `/records`에 있으면, When 슬롯 카드에서 `함`/`안함`을 누르면, Then meal-checkin이 저장된다.
6. Given 사용자가 `/records`에 있으면, When 기존 로그 삭제를 누르면, Then soft delete로 처리되어 목록에서 즉시 숨겨진다.
7. Given 사용자가 `/settings`에 있으면, When 목표를 수정/저장하면, Then 대시보드 목표 카드가 새 값으로 갱신된다.
8. Given 사용자가 `/settings`에 있으면, When 템플릿을 생성하면, Then `/records`에서 빠른 선택 칩으로 노출된다.

## 실패 테스트(선작성)
- `apps/web/tests/api-routes.test.ts`
  - `/v1/meal-checkins` POST/PATCH/DELETE
  - `/v1/workout-logs/:id` DELETE
  - `/v1/body-metrics/:id` DELETE
  - `/v1/templates/meals` CRUD
  - `/v1/templates/workouts` CRUD
- `apps/web/tests/dashboard-aggregation.test.ts`
  - 7d/day, 30d/week, 90d/month 버킷 검증

## 완료 기준
- typecheck green
- unit/integration tests green
- `/dashboard`, `/records`, `/settings` 분리 렌더링 확인
- Quick API 확인 영역 미노출
- 신규 soft delete/템플릿/meal-checkin API 계약 테스트 통과
